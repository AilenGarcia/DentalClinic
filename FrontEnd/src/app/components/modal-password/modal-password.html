<div class="container-modal">
    <app-alert-banner></app-alert-banner>
    <h2>Modificar contraseña</h2>
    <form [formGroup]="form" (ngSubmit)="handleSubmit()">
        <div class="div-input">
            <div class="div-input">
                <div class="head-input">
                    <label for="oldPassword">Contraseña vieja</label>
                    @if(oldPassword.hasError('required') && (oldPassword.dirty || oldPassword.touched)){
                    <span>*La contraseña es requerida</span>
                    }
                </div>
                <div class="password-wrapper">
                    <input [type]="showPasswordOld ? 'text' : 'password'" name="oldPassword" id="oldPassword" formControlName="oldPassword" />
                    <img class="eye-icon" alt="Mostrar u ocultar contraseña"
                        src="{{ showPasswordOld ? '/visibilityOff.svg' : '/visibility.svg' }}"
                        (click)="togglePasswordOld()"
                    />
                </div>
            </div>

            <div class="head-input">
                <label for="password">Contraseña</label>
                @if(password.dirty || password.touched){
                @if (password.hasError('required')){
                <span>*La contraseña es requerida</span>
                } @else if (password.hasError('minlength')) {
                <span>*Debe contener al menos 8 caracteres</span>
                } @else if(password.hasError('pattern')){
                <span>*Debe contener mayúsculas, minúsculas y números</span>
                }
                }
            </div>
            <div class="password-wrapper">
                <input [type]="showPasswordNew ? 'text' : 'password'" name="password" id="password" formControlName="password" />
                    <img class="eye-icon" alt="Mostrar u ocultar contraseña"
                        src="{{ showPasswordNew ? '/visibilityOff.svg' : '/visibility.svg' }}"
                        (click)="togglePasswordNew()"
                    />
            </div>
        </div>

        <div class="div-input">
            <div class="head-input">
                <label for="passwordConfirm">Repetir contraseña</label>
                @if ((passwordConfirm.dirty || passwordConfirm.touched)) {
                @if (passwordConfirm.hasError("required")){
                <span>*La contraseña es requerida</span>
                } @else if (passwordConfirm.hasError('noCoincide')){
                <span>*Las contraseñas no coinciden</span>
                }
                }
            </div>
            <div class="password-wrapper">
                <input [type]="showPasswordNew ? 'text' : 'password'" name="passwordConfirm" id="passwordConfirm" formControlName="passwordConfirm" />
                    <img class="eye-icon" alt="Mostrar u ocultar contraseña"
                        src="{{ showPasswordNew ? '/visibilityOff.svg' : '/visibility.svg' }}"
                        (click)="togglePasswordNew()"
                    />
            </div>
        </div>

        <div class="div-actions">
            <button class="close" (click)="close()">Cerrar</button>
            <button class="submit" type="submit" [disabled]="form.invalid">Actualizar</button>
        </div>
    </form>
</div>